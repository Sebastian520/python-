# 4.1.5 布尔索引


```python
import numpy as np
names = np.array(['Bob', 'Joe', 'Will','Bob','Will','Joe','Joe'])
names
```




    array(['Bob', 'Joe', 'Will', 'Bob', 'Will', 'Joe', 'Joe'], dtype='<U4')




```python
data = np.random.randn(7, 4)
data
```




    array([[-0.77774819, -1.38021912, -0.27582582,  0.57202199],
           [-0.89852776, -1.14316614,  0.52409227, -0.55991419],
           [ 0.16918975,  1.28016089, -1.74488593,  0.1988091 ],
           [ 0.72930392, -0.11883854, -1.65695566, -0.54403392],
           [ 0.6075533 ,  0.90304583,  0.71344135, -0.20290331],
           [ 0.03181171,  0.40475522, -0.96906389, -0.13856861],
           [-0.42480782,  0.9912253 ,  1.00109064, -1.66759666]])



假设人名和data数组中的一行对应，要选中所有‘Bob’对应的行
可以用==比较names数组和字符串‘Bob’，会产生一个布尔值数组


```python
names == 'Bob'
```




    array([ True, False, False,  True, False, False, False])



在索引数组时传入布尔值数组
布尔值数组的长度必须和数组轴索引长度一致


```python
data[names == 'Bob']
```




    array([[-0.77774819, -1.38021912, -0.27582582,  0.57202199],
           [ 0.72930392, -0.11883854, -1.65695566, -0.54403392]])




```python
data[names == 'Bob', 2:]
```




    array([[-0.27582582,  0.57202199],
           [-1.65695566, -0.54403392]])



使用！=或在条件表达式前使用~对条件取反


```python
names != 'Bob'
```




    array([False,  True,  True, False,  True,  True,  True])




```python
data[~(names == 'Bob')]
```




    array([[-0.89852776, -1.14316614,  0.52409227, -0.55991419],
           [ 0.16918975,  1.28016089, -1.74488593,  0.1988091 ],
           [ 0.6075533 ,  0.90304583,  0.71344135, -0.20290331],
           [ 0.03181171,  0.40475522, -0.96906389, -0.13856861],
           [-0.42480782,  0.9912253 ,  1.00109064, -1.66759666]])



当要选择三个名字中的两个时，可以用&和|进行联合


```python
mask = (names == 'Bob') | (names == 'Will')
mask
```




    array([ True, False,  True,  True,  True, False, False])




```python
data[mask]
```




    array([[-0.77774819, -1.38021912, -0.27582582,  0.57202199],
           [ 0.16918975,  1.28016089, -1.74488593,  0.1988091 ],
           [ 0.72930392, -0.11883854, -1.65695566, -0.54403392],
           [ 0.6075533 ,  0.90304583,  0.71344135, -0.20290331]])




```python
data[data < 0] = 0
data
```




    array([[0.        , 0.        , 0.        , 0.57202199],
           [0.        , 0.        , 0.52409227, 0.        ],
           [0.16918975, 1.28016089, 0.        , 0.1988091 ],
           [0.72930392, 0.        , 0.        , 0.        ],
           [0.6075533 , 0.90304583, 0.71344135, 0.        ],
           [0.03181171, 0.40475522, 0.        , 0.        ],
           [0.        , 0.9912253 , 1.00109064, 0.        ]])




```python
data[names != 'Joe'] = 7
data
```




    array([[7.        , 7.        , 7.        , 7.        ],
           [0.        , 0.        , 0.52409227, 0.        ],
           [7.        , 7.        , 7.        , 7.        ],
           [7.        , 7.        , 7.        , 7.        ],
           [7.        , 7.        , 7.        , 7.        ],
           [0.03181171, 0.40475522, 0.        , 0.        ],
           [0.        , 0.9912253 , 1.00109064, 0.        ]])


